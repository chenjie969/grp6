<?xml version="1.0" encoding="UTF-8" standalone="no"?><jatools Class="jatools.ReportDocument" Name="jatools report template"><VariableContext/><Page><Children ItemClass="PagePanel"><Item0><Width>1482</Width><Height>175</Height><Children><Item0 Class="Label"><Text>担保业务代偿项目明细表</Text><Font><Face>宋体</Face><Style>1</Style><Size>36</Size></Font><HorizontalAlignment>1</HorizontalAlignment><X>409</X><Y>8</Y><Width>473</Width><Height>71</Height></Item0><Item1 Class="Label"><Text>填报单位：</Text><X>33</X><Y>145</Y><Width>62</Width><Height>23</Height></Item1><Item2 Class="Text"><X>96</X><Y>145</Y><Width>110</Width><Height>23</Height></Item2><Item3 Class="Label"><Text>金额单位：万元</Text><X>1273</X><Y>146</Y><Width>110</Width><Height>23</Height></Item3><Item4 Class="Label"><Text>统计期间：</Text><X>499</X><Y>84</Y><Width>56</Width><Height>23</Height></Item4><Item5 Class="Label"><Text>至</Text><HorizontalAlignment>1</HorizontalAlignment><X>664</X><Y>84</Y><Width>26</Width><Height>23</Height></Item5><Item6 Class="Text"><Variable>=if(has(begindatesql)) return begindatesql;</Variable><HorizontalAlignment>1</HorizontalAlignment><X>554</X><Y>84</Y><Width>110</Width><Height>23</Height></Item6><Item7 Class="Text"><Variable>=if(has(enddatesql)) return enddatesql;else return $today;</Variable><X>706</X><Y>84</Y><Width>110</Width><Height>23</Height></Item7></Children><Type>100</Type></Item0><Item1><Y>495</Y><Width>1482</Width><Height>73</Height><Type>103</Type></Item1><Item2><Y>175</Y><Width>1482</Width><Height>320</Height><Children ItemClass="Table"><Item0><NodePath>tab_detail_replace</NodePath><Border><StyleText>border:1.0px solid #000000</StyleText></Border><X>30</X><Y>13</Y><Children><Item0 Class="Label"><Text>序号</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>0</Col></Cell></Item0><Item1 Class="Label"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Cell><Row>0</Row><Col>6</Col></Cell></Item1><Item2 Class="Label"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Cell><Row>0</Row><Col>1</Col></Cell></Item2><Item3 Class="Label"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Cell><Row>0</Row><Col>1</Col></Cell></Item3><Item4 Class="Label"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Cell><Row>0</Row><Col>2</Col></Cell></Item4><Item5 Class="Label"><Text>担保本金</Text><Border><StyleText>border-top:1.0px solid #000000;border-left:1.0px solid #000000;border-bottom:1.0px solid #000000;</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>3</Col></Cell></Item5><Item6 Class="Label"><Text>余额</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>14</Col></Cell></Item6><Item7 Class="Label"><Text>准备金冲抵</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>13</Col></Cell></Item7><Item8 Class="Label"><Text>地区</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>1</Col></Cell></Item8><Item9 Class="Label"><Text>到期日期</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>7</Col></Cell></Item9><Item10 Class="Label"><Text>项目名称</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>2</Col></Cell></Item10><Item11 Class="Label"><Text>起始日期</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>6</Col></Cell></Item11><Item12 Class="Label"><Text>代偿日期</Text><Border><StyleText>border-top:1.0px solid #000000;border-right:1.0px solid #000000;border-bottom:1.0px solid #000000;</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>9</Col></Cell></Item12><Item13 Class="Label"><Text>A角</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>10</Col></Cell></Item13><Item14 Class="Label"><Text>B角</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>11</Col></Cell></Item14><Item15 Class="Label"><Text>追偿金额</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>12</Col></Cell></Item15><Item16 Class="Label"><Text>备注</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>15</Col></Cell></Item16><Item17 Class="Label"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Cell><Row>2</Row><Col>6</Col></Cell></Item17><Item18 Class="Label"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Cell><Row>2</Row><Col>7</Col></Cell></Item18><Item19 Class="Label"><Border><StyleText>border-top:1.0px solid #000000;border-right:1.0px solid #000000;border-bottom:1.0px solid #000000;</StyleText></Border><Cell><Row>2</Row><Col>9</Col></Cell></Item19><Item20 Class="Label"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Cell><Row>2</Row><Col>10</Col></Cell></Item20><Item21 Class="Label"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Cell><Row>2</Row><Col>11</Col></Cell></Item21><Item22 Class="Label"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Cell><Row>2</Row><Col>12</Col></Cell></Item22><Item23 Class="Label"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Cell><Row>2</Row><Col>13</Col></Cell></Item23><Item24 Class="Label"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Cell><Row>2</Row><Col>14</Col></Cell></Item24><Item25 Class="Label"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Cell><Row>2</Row><Col>15</Col></Cell></Item25><Item26 Class="Label"><Text>业务品种</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>4</Col></Cell></Item26><Item27 Class="Label"><Text>合作机构</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>5</Col></Cell></Item27><Item28 Class="Text"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Font><Face>宋体</Face><Style>1</Style><Size>12</Size></Font><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>2</Row><Col>5</Col></Cell></Item28><Item29 Class="Label"><Text>实际代偿金额</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>0</Row><Col>8</Col></Cell></Item29><Item30 Class="Text"><Variable>=tab_detail_replace.replaceSum.sum()</Variable><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Format Class="DecimalFormat"><Pattern>#,###.######</Pattern></Format><Cell><Row>2</Row><Col>8</Col></Cell></Item30><Item31 Class="RowPanel"><Cell><Row>1</Row><Col>0</Col><ColSpan>16</ColSpan></Cell><Children ItemClass="RowPanel"><Item0><Cell><Row>1</Row><Col>0</Col><ColSpan>16</ColSpan></Cell><Children><Item0 Class="Text"><Variable>=$.loadEndDate</Variable><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Format Class="DateFormat"/><Cell><Row>1</Row><Col>7</Col></Cell></Item0><Item1 Class="Text"><Variable>=$.loadBeginDate</Variable><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Format Class="DateFormat"/><Cell><Row>1</Row><Col>6</Col></Cell></Item1><Item2 Class="Text"><Variable>=$.busiTypeName</Variable><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Wordwrap>true</Wordwrap><PrintStyle>auto-size:height;</PrintStyle><Cell><Row>1</Row><Col>4</Col></Cell></Item2><Item3 Class="Text"><Variable>=$.projectName</Variable><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Wordwrap>true</Wordwrap><PrintStyle>auto-size:height;</PrintStyle><Cell><Row>1</Row><Col>2</Col></Cell></Item3><Item4 Class="Text"><Variable>=$.AreaCodeName</Variable><Border><StyleText>border-top:1.0px solid #000000;border-left:1.0px solid #000000;border-right:1.0px solid #000000;</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Wordwrap>true</Wordwrap><PrintStyle>united-level:1;auto-size:height;</PrintStyle><Cell><Row>1</Row><Col>1</Col></Cell></Item4><Item5 Class="Text"><Variable>=$.replaceSum</Variable><Border><StyleText>border-top:1.0px solid #000000;border-left:1.0px solid #000000;border-right:1.0px solid #000000;</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Format Class="DecimalFormat"><Pattern>#,###.######</Pattern></Format><Wordwrap>true</Wordwrap><Cell><Row>1</Row><Col>8</Col></Cell></Item5><Item6 Class="Text"><Variable>=$.bankName</Variable><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>1</Row><Col>5</Col></Cell></Item6><Item7 Class="Text"><Variable>=$.position + 1</Variable><Border><StyleText>border-top:1.0px solid #000000;border-left:1.0px solid #000000;border-right:1.0px solid #000000;</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>1</Row><Col>0</Col></Cell></Item7><Item8 Class="Text"><Variable>=$.loadSum</Variable><Border><StyleText>border-top:1.0px solid #000000;border-left:1.0px solid #000000;</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Format Class="DecimalFormat"><Pattern>#,###.######</Pattern></Format><Cell><Row>1</Row><Col>3</Col></Cell></Item8><Item9 Class="Text"><Variable>=$.replaceDate</Variable><Border><StyleText>border-top:1.0px solid #000000;border-right:1.0px solid #000000;</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>1</Row><Col>9</Col></Cell></Item9><Item10 Class="Text"><Variable>=$.amanName</Variable><Border><StyleText>border-top:1.0px solid #000000;border-left:1.0px solid #000000;border-right:1.0px solid #000000;</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>1</Row><Col>10</Col></Cell></Item10><Item11 Class="Text"><Variable>$.bmanName</Variable><Border><StyleText>border-top:1.0px solid #000000;border-left:1.0px solid #000000;border-right:1.0px solid #000000;</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>1</Row><Col>11</Col></Cell></Item11><Item12 Class="Text"><Variable>=$.returnSum</Variable><Border><StyleText>border-top:1.0px solid #000000;border-left:1.0px solid #000000;</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Format Class="DecimalFormat"><Pattern>#,###.######</Pattern></Format><Cell><Row>1</Row><Col>12</Col></Cell></Item12><Item13 Class="Text"><Variable>=$.dangerReplaceSum</Variable><Border><StyleText>border-top:1.0px solid #000000;border-left:1.0px solid #000000;border-right:1.0px solid #000000;</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Format Class="DecimalFormat"><Pattern>#,###.######</Pattern></Format><Cell><Row>1</Row><Col>13</Col></Cell></Item13><Item14 Class="Label"><Border><StyleText>border-top:1.0px solid #000000;border-left:1.0px solid #000000;border-right:1.0px solid #000000;</StyleText></Border><Cell><Row>1</Row><Col>15</Col></Cell></Item14><Item15 Class="Text"><Variable>=$.AreaCodeName</Variable><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Wordwrap>true</Wordwrap><PrintStyle>auto-size:height;</PrintStyle><Cell><Row>1</Row><Col>1</Col></Cell></Item15><Item16 Class="Text"><Variable>=$.replaceSum-$.returnSum</Variable><Border><StyleText>border-top:1.0px solid #000000;border-left:1.0px solid #000000;border-right:1.0px solid #000000;</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Format Class="DecimalFormat"><Pattern>#,###.######</Pattern></Format><Wordwrap>true</Wordwrap><Cell><Row>1</Row><Col>14</Col></Cell></Item16></Children><NodePath>Row</NodePath></Item0></Children><NodePath>AreaCodeName</NodePath></Item31><Item32 Class="Label"><Text>合计</Text><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Font><Face>宋体</Face><Style>1</Style><Size>12</Size></Font><HorizontalAlignment>1</HorizontalAlignment><Cell><Row>2</Row><Col>0</Col><ColSpan>3</ColSpan></Cell></Item32><Item33 Class="Label"><Border><StyleText>border:1.0px solid #000000</StyleText></Border><Cell><Row>2</Row><Col>4</Col></Cell></Item33><Item34 Class="Text"><Variable>=tab_detail_replace.loadSum.sum()</Variable><Border><StyleText>border:1.0px solid #000000</StyleText></Border><HorizontalAlignment>1</HorizontalAlignment><Format Class="DecimalFormat"><Pattern>#,###.######</Pattern></Format><Cell><Row>2</Row><Col>3</Col></Cell></Item34></Children><ColumnWidths>63,57,153,81,84,99,87,78,99,84,60,60,81,108,86,57</ColumnWidths><RowHeights>40,20,20</RowHeights></Item0></Children><Type>102</Type></Item2></Children><PageFormat><Width>1518</Width><Height>604</Height><Left>18</Left><Top>18</Top><Right>18</Right><Bottom>18</Bottom></PageFormat></Page><NodeSource><Children ItemClass="DatasetNodeSource"><Item0><Children ItemClass="GroupNodeSource"><Item0><Children ItemClass="RowNodeSource"><Item0/></Children><Group><Field>AreaCodeName</Field></Group></Item0></Children><Reader Class="SqlReader"><Name>tab_detail_replace</Name><Sql>SELECT 
	p.bankName,
	p.busiTypeName,
	IFNULL(p.loadSum,0) AS loadSum,
	p.periodMonthDay,
	p.loadBeginDate,
	p.loadEndDate,
	IFNULL(rp.replaceSum,0) AS replaceSum,
	IFNULL(rp.dangerReplaceSum,0) AS dangerReplaceSum,
	IFNULL(tab.returnSum,0) AS returnSum,
	rp.replaceDate,
	ad.AreaCodeName,
	ad.amanName,
	ad.bmanName,
	a.projectName

FROM pro_replace rp
LEFT JOIN pro_project p ON  p.project_ID = rp.project_ID
LEFT JOIN pro_applydetail ad ON ad.applyDetail_ID = p.applyDetail_ID
LEFT JOIN pro_apply a ON a.apply_ID = p.apply_Id

LEFT JOIN ( SELECT r.project_ID,SUM(IFNULL(r.returnSum,0)) AS returnSum 						                  	  
                        FROM pro_returndetail r
                        WHERE 1=1 
                    	
			${has(begindatesql)?(" and r.returnDate&gt;= '"+begindatesql+"' "):" "}
			${has(enddatesql)?(" and r.returnDate&lt;='"+enddatesql+"'"):" "}
                       	GROUP BY r.project_ID
                    ) tab ON tab.project_ID=p.project_ID
WHERE 1=1
${has(begindatesql)?(" and rp.replaceDate&gt;= '"+begindatesql+"' "):" "}
${has(enddatesql)?(" and rp.replaceDate&lt;='"+enddatesql+"'"):" and rp.replaceDate&lt;=CURDATE() "}

GROUP BY ad.AreaCodeName

</Sql><Description>SELECT 
	p.bankName,
	p.busiTypeName,
	IFNULL(p.loadSum,0) AS loadSum,
	p.periodMonthDay,
	p.loadBeginDate,
	p.loadEndDate,
	IFNULL(rp.replaceSum,0) AS replaceSum,
	IFNULL(rp.dangerReplaceSum,0) AS dangerReplaceSum,
	IFNULL(tab.returnSum,0) AS returnSum,
	rp.replaceDate,
	ad.AreaCodeName,
	ad.amanName,
	ad.bmanName,
	a.projectName

FROM pro_replace rp
LEFT JOIN pro_project p ON  p.project_ID = rp.project_ID
LEFT JOIN pro_applydetail ad ON ad.applyDetail_ID = p.applyDetail_ID
LEFT JOIN pro_apply a ON a.apply_ID = p.apply_Id

LEFT JOIN ( SELECT r.project_ID,SUM(IFNULL(r.returnSum,0)) AS returnSum 						                  	  
                        FROM pro_returndetail r
                        WHERE 1=1 
                    	
			${has(begindatesql)?(" and r.returnDate&gt;= '"+begindatesql+"' "):" "}
			${has(enddatesql)?(" and r.returnDate&lt;='"+enddatesql+"'"):" "}
                       	GROUP BY r.project_ID
                    ) tab ON tab.project_ID=p.project_ID
WHERE 1=1
${has(begindatesql)?(" and rp.replaceDate&gt;= '"+begindatesql+"' "):" "}
${has(enddatesql)?(" and rp.replaceDate&lt;='"+enddatesql+"'"):" and rp.replaceDate&lt;=CURDATE() "}

GROUP BY ad.AreaCodeName

</Description><Connection><Driver>${property("proxool.driverClassName")}</Driver><User>${property("proxool.username")}</User><Password>${property("proxool.password")}</Password><Url>${property("proxool.url")}</Url></Connection></Reader><TagName>tab_detail_replace</TagName></Item0></Children></NodeSource></jatools>